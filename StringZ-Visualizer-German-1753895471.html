<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>StringZ Visualizer - German Translation Review</title>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
    <style>
      body {
                    font-family: Arial, sans-serif;
                }
                .toggle-btn {
                    position: fixed;
                    top: 10px;
                    left: 10px;
                    z-index: 9999;
                    padding: 8px 16px;
                    background-color: #007bff;
                    color: white;
                    border: none;
                    border-radius: 4px;
                    cursor: pointer;
                    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
                }
                #clearState {
                    float: left;
                    margin-right: 10px;
                    margin-bottom: 10px;
                    padding: 5px 10px;
                    background-color: #dc3545;
                    color: white;
                    border: none;
                    border-radius: 4px;
                    cursor: pointer;
                }
                .container {
                    padding-top: 60px;
                }
                #myTable td {
                    user-select: text !important;
                }
                select.state-select {
                    width: 100%;
                    font-weight: bold;
                }
                select.state-select.pass {
                    color: green;
                }
                select.state-select.fail {
                    color: red;
                }
                .info-banner {
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    color: white;
                    padding: 15px;
                    margin: 10px 0;
                    border-radius: 8px;
                    text-align: center;
                }
    </style>
  </head>
  <body>
    <button class="toggle-btn" onclick="toggleData()">Toggle Raw/Formatted</button>
    <div class="container">
      <div class="info-banner">
        <h2>üéÆ StringZ Visualizer - German Translation Review</h2>
        <p>üìä <strong>32</strong> strings ‚Ä¢ üåç <strong>EN</strong> ‚Üí <strong>German</strong> ‚Ä¢ üõ†Ô∏è Generated by StringZ</p>
      </div>
      <button id="clearState">Clear All States</button>
      <table id="myTable" class="display" style="width:100%"></table>
    </div>
    <script>
      const headers = ["strId", "EN", "German", "State", "Token Check Result"];
            const rawData = [["PaperworkCurse_TokenMistakeEnglish", "&lt;color&quot;#cc1430&quot;&gt;Curse of Eternal Paperwork&lt;/color&gt;", "&lt;color=&quot;#cc1430&quot;&gt;Fluch des ewigen Papierkrams&lt;/color&gt;", "", ""], ["PaperworkCurse_0", "&lt;color=&quot;#cc1430&quot;&gt;Curse of Eternal Paperwork&lt;/color&gt;", "&lt;color=&quot;#cc1430&quot;&gt;Fluch des ewigen Papierkrams&lt;/color&gt;", "", ""], ["PaperworkBothEnglishStrings", "&lt;color=&quot;#cc1430&quot;&gt;Curse of Eternal Paperwork&lt;/color&gt;", "&lt;color=&quot;#cc1430&quot;&gt;Curse of Eternal Paperwork&lt;/color&gt;", "", ""], ["PaperworkCurse_TokenMistakeGerman", "&lt;color=&quot;#cc1430&quot;&gt;Curse of Eternal Paperwork&lt;/color&gt;", "&lt;color=&quot;#cc1430&quot;&gt;Fluch des ewigen Papierkrams&lt;color&gt;", "", ""], ["PaperworkCurse_TokenMissing", "&lt;color=&quot;#cc1430&quot;&gt;Curse of Eternal Paperwork&lt;/color&gt;", "&lt;color=&quot;#cc1430&quot;&gt;Fluch des ewigen Papierkrams", "", ""], ["ColorToken_ColorfulDuplicate_0", "This is a &lt;color=&quot;#1e8852&quot;&gt;colorful&lt;/color&gt; duplicate string.", "Dies ist ein &lt;color=&quot;#1e8852&quot;&gt;farbenfroher&lt;/color&gt; doppelter String.", "", ""], ["ColorToken_ColorfulDuplicate_0_Incorrect", "This is a &lt;color=&quot;#1e8852&quot;&gt;colorful&lt;/color&gt; duplicate string.", "Dies ist ein &lt;color=&quot;#1e8852&gt;farbenfroher&lt;/color&gt; doppelter String.", "", ""], ["Duplicate_0", "This is a duplicate string.", "Dies ist ein doppelter String.", "", ""], ["Duplicate_2_AddedSpace", "This is a duplicate string.", "Dies ist ein  doppelter String.", "", ""], ["SoupTokenHopefullyCorrect_0", "This soup contains {50,num}% water, {40,num}% vegetables and {10,num}% pure frustration and despair.", "Diese Suppe beinhaltet {50,num}% Wasser, {40,num}% Gem√ºse und {10,num}% pure Frustration and Verzweiflung.", "", ""], ["TokenSoup_PercentMissing_0", "This soup contains {50,num}% water, {40,num}% vegetables and {10,num}% pure frustration and despair.", "Diese Suppe beinhaltet {60,num}% Wasser, {40,num}% Gem√ºse und {10,num} pure Frustration and Verzweiflung.", "", ""], ["TokenSoup_NumMismatch", "This soup contains {50,num}% water, {40,num}% vegetables and {10,num}% pure frustration and despair.", "Diese Suppe beinhaltet {60,num}% Wasser, {40,num}% Gem√ºse und {10,num}% pure Frustration and Verzweiflung.", "", ""], ["TokenSoup_SevereIssue", "This soup contains {50,num}% water, {40,num}% vegetables and {10,num}% pure frustration and despair.", "Diese Suppe beinhaltet nichts.", "", ""], ["Stew_RandomSortingTestString", "&quot;Mmmmh, this stew tastes delicious! What are the ingredients?&quot;", "&quot;Mmmmh, dieser Eintopf schmeckt lecker! Was ist da alles drin?&quot;", "", ""], ["Dup_Stew_RandomSortingTestString_MMissing", "&quot;Mmmmh, this stew tastes delicious! What are the ingredients?&quot;", "&quot;Mmmh, dieser Eintopf schmeckt lecker! Was ist da alles drin?&quot;", "", ""], ["DayOfWeekFri_Inconsistent_0", "It&#x27;s Friday today!", "Es ist Freitag!", "", ""], ["DayOfWeekFri_Consistent", "It&#x27;s Friday today!", "Heute ist Freitag!", "", ""], ["CurseOfDups_0", "&lt;color=&quot;#cc1430&quot;&gt;Curse of Duplicate Strings&lt;/color&gt;", "&lt;color=&quot;#cc1430&quot;&gt;Fluch der doppelten Strings&lt;/color&gt;", "", ""], ["CurseOfDupsSwappedToken", "&lt;color=&quot;#cc1430&quot;&gt;Curse of Duplicate Strings&lt;/color&gt;", "&lt;/color&gt;Fluch der doppelten Strings&lt;color=&quot;#cc1430&quot;&gt;", "", ""], ["ColorToken_HopefullyCorrect", "Hopefully &lt;color=&quot;#1e8852&quot;&gt;correct&lt;/color&gt;.", "Hoffentlich &lt;color=&quot;#1e8852&quot;&gt;richtig&lt;/color&gt;.", "", ""], ["ColorToken_HopefullyAlsoCorrect", "Hopefully also &lt;color=&quot;#1e8852&quot;&gt;correct&lt;/color&gt;.", "Hoffentlich auch &lt;color=&quot;#1e8852&quot;&gt;richtig&lt;/color&gt;.", "", ""], ["DayOfWeekTue", "It&#x27;s Tuesday today!", "Heute ist Dienstag!", "", ""], ["DayOfWeekTue_MissingSpace", "It&#x27;s Tuesday today!", "Heuteist Dienstag!", "", ""], ["RandomSortingTestString_Cake", "&quot;Mmmmh, this cake tastes delicious! What are the ingredients?&quot;", "&quot;Mmmmh, dieser Kuchen schmeckt lecker! Was ist da alles drin?&quot;", "", ""], ["RandomSortingTestStringCasserole", "&quot;Mmmmh, this casserole tastes delicious! What are the ingredients?&quot;", "&quot;Mmmmh, dieser Auflauf schmeckt lecker! Was ist da alles drin?&quot;", "", ""], ["SortingTestStringRandom_Soup", "&quot;Mmmmh, this soup tastes delicious! What are the ingredients?&quot;", "&quot;Mmmmh, diese Suppe schmeckt lecker! Was ist da alles drin?&quot;", "", ""], ["DayOfWeekMon", "It&#x27;s Monday today!", "Heute ist Montag!", "", ""], ["DayOfWeekSat", "It&#x27;s Saturday today!", "Heute ist Samstag!", "", ""], ["DayOfWeekSun_0", "It&#x27;s Sunday today!", "Heute ist Sonnstag!", "", ""], ["DayOfWeekThu", "It&#x27;s Thursday today!", "Heute ist Donnerstag!", "", ""], ["WedDayOfWeek", "It&#x27;s Wednesday today!", "Heute ist Mittwoch!", "", ""], ["ThankYouMessage_0", "Thank you Leo for sharing! :D", "Danke f√ºrs Teilen, Leo! :D", "", ""]];
            const formattedData = [["PaperworkCurse_TokenMistakeEnglish", "<span style=\"color: #cc1430;\">Curse of Eternal Paperwork</span>", "<span style=\"color: #cc1430;\">Fluch des ewigen Papierkrams</span>", "", ""], ["PaperworkCurse_0", "<span style=\"color: #cc1430;\">Curse of Eternal Paperwork</span>", "<span style=\"color: #cc1430;\">Fluch des ewigen Papierkrams</span>", "", ""], ["PaperworkBothEnglishStrings", "<span style=\"color: #cc1430;\">Curse of Eternal Paperwork</span>", "<span style=\"color: #cc1430;\">Curse of Eternal Paperwork</span>", "", ""], ["PaperworkCurse_TokenMistakeGerman", "<span style=\"color: #cc1430;\">Curse of Eternal Paperwork</span>", "<color=\"#cc1430\">Fluch des ewigen Papierkrams<color>", "", ""], ["PaperworkCurse_TokenMissing", "<span style=\"color: #cc1430;\">Curse of Eternal Paperwork</span>", "<color=\"#cc1430\">Fluch des ewigen Papierkrams", "", ""], ["ColorToken_ColorfulDuplicate_0", "This is a <span style=\"color: #1e8852;\">colorful</span> duplicate string.", "Dies ist ein <span style=\"color: #1e8852;\">farbenfroher</span> doppelter String.", "", ""], ["ColorToken_ColorfulDuplicate_0_Incorrect", "This is a <span style=\"color: #1e8852;\">colorful</span> duplicate string.", "Dies ist ein <span style=\"color: #1e8852;\">farbenfroher</span> doppelter String.", "", ""], ["Duplicate_0", "This is a duplicate string.", "Dies ist ein doppelter String.", "", ""], ["Duplicate_2_AddedSpace", "This is a duplicate string.", "Dies ist ein  doppelter String.", "", ""], ["SoupTokenHopefullyCorrect_0", "This soup contains {50,num}% water, {40,num}% vegetables and {10,num}% pure frustration and despair.", "Diese Suppe beinhaltet {50,num}% Wasser, {40,num}% Gem√ºse und {10,num}% pure Frustration and Verzweiflung.", "", ""], ["TokenSoup_PercentMissing_0", "This soup contains {50,num}% water, {40,num}% vegetables and {10,num}% pure frustration and despair.", "Diese Suppe beinhaltet {60,num}% Wasser, {40,num}% Gem√ºse und {10,num} pure Frustration and Verzweiflung.", "", ""], ["TokenSoup_NumMismatch", "This soup contains {50,num}% water, {40,num}% vegetables and {10,num}% pure frustration and despair.", "Diese Suppe beinhaltet {60,num}% Wasser, {40,num}% Gem√ºse und {10,num}% pure Frustration and Verzweiflung.", "", ""], ["TokenSoup_SevereIssue", "This soup contains {50,num}% water, {40,num}% vegetables and {10,num}% pure frustration and despair.", "Diese Suppe beinhaltet nichts.", "", ""], ["Stew_RandomSortingTestString", "\"Mmmmh, this stew tastes delicious! What are the ingredients?\"", "\"Mmmmh, dieser Eintopf schmeckt lecker! Was ist da alles drin?\"", "", ""], ["Dup_Stew_RandomSortingTestString_MMissing", "\"Mmmmh, this stew tastes delicious! What are the ingredients?\"", "\"Mmmh, dieser Eintopf schmeckt lecker! Was ist da alles drin?\"", "", ""], ["DayOfWeekFri_Inconsistent_0", "It's Friday today!", "Es ist Freitag!", "", ""], ["DayOfWeekFri_Consistent", "It's Friday today!", "Heute ist Freitag!", "", ""], ["CurseOfDups_0", "<span style=\"color: #cc1430;\">Curse of Duplicate Strings</span>", "<span style=\"color: #cc1430;\">Fluch der doppelten Strings</span>", "", ""], ["CurseOfDupsSwappedToken", "<span style=\"color: #cc1430;\">Curse of Duplicate Strings</span>", "</color>Fluch der doppelten Strings<color=\"#cc1430\">", "", ""], ["ColorToken_HopefullyCorrect", "Hopefully <span style=\"color: #1e8852;\">correct</span>.", "Hoffentlich <span style=\"color: #1e8852;\">richtig</span>.", "", ""], ["ColorToken_HopefullyAlsoCorrect", "Hopefully also <span style=\"color: #1e8852;\">correct</span>.", "Hoffentlich auch <span style=\"color: #1e8852;\">richtig</span>.", "", ""], ["DayOfWeekTue", "It's Tuesday today!", "Heute ist Dienstag!", "", ""], ["DayOfWeekTue_MissingSpace", "It's Tuesday today!", "Heuteist Dienstag!", "", ""], ["RandomSortingTestString_Cake", "\"Mmmmh, this cake tastes delicious! What are the ingredients?\"", "\"Mmmmh, dieser Kuchen schmeckt lecker! Was ist da alles drin?\"", "", ""], ["RandomSortingTestStringCasserole", "\"Mmmmh, this casserole tastes delicious! What are the ingredients?\"", "\"Mmmmh, dieser Auflauf schmeckt lecker! Was ist da alles drin?\"", "", ""], ["SortingTestStringRandom_Soup", "\"Mmmmh, this soup tastes delicious! What are the ingredients?\"", "\"Mmmmh, diese Suppe schmeckt lecker! Was ist da alles drin?\"", "", ""], ["DayOfWeekMon", "It's Monday today!", "Heute ist Montag!", "", ""], ["DayOfWeekSat", "It's Saturday today!", "Heute ist Samstag!", "", ""], ["DayOfWeekSun_0", "It's Sunday today!", "Heute ist Sonnstag!", "", ""], ["DayOfWeekThu", "It's Thursday today!", "Heute ist Donnerstag!", "", ""], ["WedDayOfWeek", "It's Wednesday today!", "Heute ist Mittwoch!", "", ""], ["ThankYouMessage_0", "Thank you Leo for sharing! :D", "Danke f√ºrs Teilen, Leo! :D", "", ""]];
            let showingRaw = false;
            let tableData = formattedData;
            let dataTable;
        
            function getStateKey(index) {
                return "state_StringZ_Visualizer_-_German_Translation_Review_row_" + index;
            }
        
            function generateRowWithState(row, idx) {
                const savedState = localStorage.getItem(getStateKey(idx)) || "";
                const selectHTML = '<select class="state-select ' + savedState.toLowerCase() + '">' +
                    '<option value="" ' + (savedState === "" ? "selected" : "") + '></option>' +
                    '<option value="Pass" ' + (savedState === "Pass" ? "selected" : "") + '>Pass</option>' +
                    '<option value="Fail" ' + (savedState === "Fail" ? "selected" : "") + '>Fail</option>' +
                    '</select>';
                const newRow = row.slice();
                const stateIndex = headers.indexOf("State");
                newRow[stateIndex] = selectHTML;
                return newRow;
            }
        
            function renderData(data) {
                tableData = data;
                const transformed = data.map((row, idx) => generateRowWithState(row, idx));
        
                if (!dataTable) {
                    dataTable = $('#myTable').DataTable({
                        data: transformed,
                        columns: headers.map(h => ({ title: h })),
                        scrollX: true,
                        paging: true,
                        searching: true,
                        ordering: true,
                        deferRender: true,
                        lengthMenu: [[-1, 10, 25, 50], ["All", 10, 25, 50]],
                        columnDefs: [
                            {
                                targets: headers.indexOf("State"),
                                orderable: true
                            }
                        ]
                    });
        
                    $('#myTable tbody').on('change', 'select.state-select', function () {
                        const rowIdx = dataTable.row($(this).closest('tr')).index();
                        const value = $(this).val();
                        localStorage.setItem(getStateKey(rowIdx), value);
                        this.className = "state-select " + value.toLowerCase();
                    });
                } else {
                    const currentPage = dataTable.page();
                    const currentLength = dataTable.page.len();
                    dataTable.clear().rows.add(transformed).draw(false);
                    dataTable.page.len(currentLength).draw();
                    dataTable.page(currentPage).draw(false);
                }
            }
        
            function toggleData() {
                showingRaw = !showingRaw;
                renderData(showingRaw ? rawData : formattedData);
                
                // Update button text
                const btn = document.querySelector('.toggle-btn');
                btn.textContent = showingRaw ? 'Show Formatted' : 'Show Raw';
            }
        
            function clearAllStates() {
                const total = tableData.length;
                for (let i = 0; i < total; i++) {
                    localStorage.removeItem(getStateKey(i));
                }
                renderData(tableData);
                alert('All review states cleared!');
            }
        
            $(document).ready(function () {
                renderData(formattedData);
                $('#clearState').click(clearAllStates);
            });
    </script>
  </body>
</html>