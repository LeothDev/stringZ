<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>StringZ Visualizer - German Translation Review</title>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
    <style>
      body {
                    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    margin: 0;
                    padding: 0;
                    min-height: 100vh;
                }
                .toggle-btn {
                    position: fixed;
                    top: 15px;
                    left: 15px;
                    z-index: 9999;
                    padding: 10px 20px;
                    background: linear-gradient(135deg, #28a745, #20c997);
                    color: white;
                    border: none;
                    border-radius: 25px;
                    cursor: pointer;
                    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
                    font-weight: 600;
                    font-size: 14px;
                    transition: all 0.3s ease;
                }
                .toggle-btn:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 6px 20px rgba(0,0,0,0.4);
                }
                #clearState {
                    float: left;
                    margin-right: 15px;
                    margin-bottom: 15px;
                    padding: 8px 16px;
                    background: linear-gradient(135deg, #dc3545, #c82333);
                    color: white;
                    border: none;
                    border-radius: 20px;
                    cursor: pointer;
                    font-weight: 600;
                    transition: all 0.3s ease;
                    box-shadow: 0 2px 8px rgba(220, 53, 69, 0.3);
                }
                #clearState:hover {
                    transform: translateY(-1px);
                    box-shadow: 0 4px 12px rgba(220, 53, 69, 0.4);
                }
                .container {
                    padding: 80px 20px 20px 20px;
                    background: white;
                    margin: 20px;
                    border-radius: 15px;
                    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
                    min-height: calc(100vh - 40px);
                }
                .info-banner {
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    color: white;
                    padding: 20px;
                    margin: -20px -20px 20px -20px;
                    border-radius: 15px 15px 0 0;
                    text-align: center;
                    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                }
                .info-banner h2 {
                    margin: 0 0 10px 0;
                    font-size: 24px;
                    font-weight: 700;
                }
                .info-banner p {
                    margin: 0;
                    font-size: 16px;
                    opacity: 0.9;
                }
                #myTable {
                    border-radius: 8px;
                    overflow: hidden;
                    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
                }
                #myTable td {
                    user-select: text !important;
                    padding: 12px 8px;
                    vertical-align: top;
                    border-bottom: 1px solid #e9ecef;
                }
                #myTable th {
                    background: linear-gradient(135deg, #495057, #6c757d);
                    color: white;
                    font-weight: 600;
                    padding: 15px 8px;
                    text-align: center;
                }
                /* Enhanced styling for different columns */
                #myTable td:first-child {
                    font-family: 'Courier New', monospace;
                    font-size: 12px;
                    color: #6c757d;
                    max-width: 120px;
                }
                #myTable td:nth-child(2), #myTable td:nth-child(3) {
                    line-height: 1.4;
                    max-width: 300px;
                    word-wrap: break-word;
                }
                #myTable td:nth-child(4) {
                    text-align: center;
                    font-weight: 700;
                    color: #007bff;
                    font-size: 16px;
                }
                select.state-select {
                    width: 100%;
                    font-weight: bold;
                    padding: 8px;
                    border: 2px solid #dee2e6;
                    border-radius: 8px;
                    font-size: 14px;
                    transition: all 0.3s ease;
                }
                select.state-select:focus {
                    outline: none;
                    border-color: #007bff;
                    box-shadow: 0 0 0 3px rgba(0,123,255,0.25);
                }
                select.state-select.pass {
                    color: #28a745;
                    border-color: #28a745;
                    background-color: #f8fff9;
                }
                select.state-select.fail {
                    color: #dc3545;
                    border-color: #dc3545;
                    background-color: #fff8f8;
                }
                /* DataTables enhancements */
                .dataTables_wrapper .dataTables_length,
                .dataTables_wrapper .dataTables_filter,
                .dataTables_wrapper .dataTables_info,
                .dataTables_wrapper .dataTables_paginate {
                    margin: 10px 0;
                }
                .dataTables_wrapper .dataTables_filter input {
                    border: 2px solid #dee2e6;
                    border-radius: 20px;
                    padding: 8px 15px;
                    margin-left: 10px;
                }
                .dataTables_wrapper .dataTables_length select {
                    border: 2px solid #dee2e6;
                    border-radius: 8px;
                    padding: 5px 10px;
                    margin: 0 10px;
                }
                /* Responsive improvements */
                @media (max-width: 768px) {
                    .container {
                        margin: 10px;
                        padding: 60px 10px 10px 10px;
                    }
                    .toggle-btn {
                        top: 10px;
                        left: 10px;
                        padding: 8px 16px;
                        font-size: 12px;
                    }
                }
    </style>
  </head>
  <body>
    <button class="toggle-btn" onclick="toggleData()">Toggle Raw/Formatted</button>
    <div class="container">
      <div class="info-banner">
        <h2>üéÆ StringZ Visualizer - German Translation Review</h2>
        <p>üìä <strong>32</strong> strings ‚Ä¢ üåç <strong>EN</strong> ‚Üí <strong>German</strong> ‚Ä¢ üõ†Ô∏è Generated by StringZ</p>
      </div>
      <button id="clearState">Clear All States</button>
      <table id="myTable" class="display" style="width:100%"></table>
    </div>
    <script>
      const headers = ["strId", "EN", "German", "Occurrences", "State"];
            const rawData = [["PaperworkCurse_TokenMistakeEnglish", "&lt;color&quot;#cc1430&quot;&gt;Curse of Eternal Paperwork&lt;/color&gt;", "&lt;color=&quot;#cc1430&quot;&gt;Fluch des ewigen Papierkrams&lt;/color&gt;", "1", ""], ["PaperworkCurse_0", "&lt;color=&quot;#cc1430&quot;&gt;Curse of Eternal Paperwork&lt;/color&gt;", "&lt;color=&quot;#cc1430&quot;&gt;Fluch des ewigen Papierkrams&lt;/color&gt;", "2", ""], ["PaperworkBothEnglishStrings", "&lt;color=&quot;#cc1430&quot;&gt;Curse of Eternal Paperwork&lt;/color&gt;", "&lt;color=&quot;#cc1430&quot;&gt;Curse of Eternal Paperwork&lt;/color&gt;", "1", ""], ["PaperworkCurse_TokenMistakeGerman", "&lt;color=&quot;#cc1430&quot;&gt;Curse of Eternal Paperwork&lt;/color&gt;", "&lt;color=&quot;#cc1430&quot;&gt;Fluch des ewigen Papierkrams&lt;color&gt;", "1", ""], ["PaperworkCurse_TokenMissing", "&lt;color=&quot;#cc1430&quot;&gt;Curse of Eternal Paperwork&lt;/color&gt;", "&lt;color=&quot;#cc1430&quot;&gt;Fluch des ewigen Papierkrams", "1", ""], ["ColorToken_ColorfulDuplicate_0", "This is a &lt;color=&quot;#1e8852&quot;&gt;colorful&lt;/color&gt; duplicate string.", "Dies ist ein &lt;color=&quot;#1e8852&quot;&gt;farbenfroher&lt;/color&gt; doppelter String.", "3", ""], ["ColorToken_ColorfulDuplicate_0_Incorrect", "This is a &lt;color=&quot;#1e8852&quot;&gt;colorful&lt;/color&gt; duplicate string.", "Dies ist ein &lt;color=&quot;#1e8852&gt;farbenfroher&lt;/color&gt; doppelter String.", "1", ""], ["Duplicate_0", "This is a duplicate string.", "Dies ist ein doppelter String.", "7", ""], ["Duplicate_2_AddedSpace", "This is a duplicate string.", "Dies ist ein  doppelter String.", "1", ""], ["SoupTokenHopefullyCorrect_0", "This soup contains {50,num}% water, {40,num}% vegetables and {10,num}% pure frustration and despair.", "Diese Suppe beinhaltet {50,num}% Wasser, {40,num}% Gem√ºse und {10,num}% pure Frustration and Verzweiflung.", "2", ""], ["TokenSoup_PercentMissing_0", "This soup contains {50,num}% water, {40,num}% vegetables and {10,num}% pure frustration and despair.", "Diese Suppe beinhaltet {60,num}% Wasser, {40,num}% Gem√ºse und {10,num} pure Frustration and Verzweiflung.", "2", ""], ["TokenSoup_NumMismatch", "This soup contains {50,num}% water, {40,num}% vegetables and {10,num}% pure frustration and despair.", "Diese Suppe beinhaltet {60,num}% Wasser, {40,num}% Gem√ºse und {10,num}% pure Frustration and Verzweiflung.", "1", ""], ["TokenSoup_SevereIssue", "This soup contains {50,num}% water, {40,num}% vegetables and {10,num}% pure frustration and despair.", "Diese Suppe beinhaltet nichts.", "1", ""], ["Stew_RandomSortingTestString", "&quot;Mmmmh, this stew tastes delicious! What are the ingredients?&quot;", "&quot;Mmmmh, dieser Eintopf schmeckt lecker! Was ist da alles drin?&quot;", "2", ""], ["Dup_Stew_RandomSortingTestString_MMissing", "&quot;Mmmmh, this stew tastes delicious! What are the ingredients?&quot;", "&quot;Mmmh, dieser Eintopf schmeckt lecker! Was ist da alles drin?&quot;", "1", ""], ["DayOfWeekFri_Inconsistent_0", "It&#x27;s Friday today!", "Es ist Freitag!", "2", ""], ["DayOfWeekFri_Consistent", "It&#x27;s Friday today!", "Heute ist Freitag!", "1", ""], ["CurseOfDups_0", "&lt;color=&quot;#cc1430&quot;&gt;Curse of Duplicate Strings&lt;/color&gt;", "&lt;color=&quot;#cc1430&quot;&gt;Fluch der doppelten Strings&lt;/color&gt;", "2", ""], ["CurseOfDupsSwappedToken", "&lt;color=&quot;#cc1430&quot;&gt;Curse of Duplicate Strings&lt;/color&gt;", "&lt;/color&gt;Fluch der doppelten Strings&lt;color=&quot;#cc1430&quot;&gt;", "1", ""], ["ColorToken_HopefullyCorrect", "Hopefully &lt;color=&quot;#1e8852&quot;&gt;correct&lt;/color&gt;.", "Hoffentlich &lt;color=&quot;#1e8852&quot;&gt;richtig&lt;/color&gt;.", "1", ""], ["ColorToken_HopefullyAlsoCorrect", "Hopefully also &lt;color=&quot;#1e8852&quot;&gt;correct&lt;/color&gt;.", "Hoffentlich auch &lt;color=&quot;#1e8852&quot;&gt;richtig&lt;/color&gt;.", "1", ""], ["DayOfWeekTue", "It&#x27;s Tuesday today!", "Heute ist Dienstag!", "1", ""], ["DayOfWeekTue_MissingSpace", "It&#x27;s Tuesday today!", "Heuteist Dienstag!", "1", ""], ["RandomSortingTestString_Cake", "&quot;Mmmmh, this cake tastes delicious! What are the ingredients?&quot;", "&quot;Mmmmh, dieser Kuchen schmeckt lecker! Was ist da alles drin?&quot;", "2", ""], ["RandomSortingTestStringCasserole", "&quot;Mmmmh, this casserole tastes delicious! What are the ingredients?&quot;", "&quot;Mmmmh, dieser Auflauf schmeckt lecker! Was ist da alles drin?&quot;", "1", ""], ["SortingTestStringRandom_Soup", "&quot;Mmmmh, this soup tastes delicious! What are the ingredients?&quot;", "&quot;Mmmmh, diese Suppe schmeckt lecker! Was ist da alles drin?&quot;", "1", ""], ["DayOfWeekMon", "It&#x27;s Monday today!", "Heute ist Montag!", "1", ""], ["DayOfWeekSat", "It&#x27;s Saturday today!", "Heute ist Samstag!", "1", ""], ["DayOfWeekSun_0", "It&#x27;s Sunday today!", "Heute ist Sonnstag!", "2", ""], ["DayOfWeekThu", "It&#x27;s Thursday today!", "Heute ist Donnerstag!", "1", ""], ["WedDayOfWeek", "It&#x27;s Wednesday today!", "Heute ist Mittwoch!", "1", ""], ["ThankYouMessage_0", "Thank you Leo for sharing! :D", "Danke f√ºrs Teilen, Leo! :D", "2", ""]];
            const formattedData = [["PaperworkCurse_TokenMistakeEnglish", "<span style=\"color: #cc1430;\">Curse of Eternal Paperwork</span>", "<span style=\"color: #cc1430;\">Fluch des ewigen Papierkrams</span>", "1", ""], ["PaperworkCurse_0", "<span style=\"color: #cc1430;\">Curse of Eternal Paperwork</span>", "<span style=\"color: #cc1430;\">Fluch des ewigen Papierkrams</span>", "2", ""], ["PaperworkBothEnglishStrings", "<span style=\"color: #cc1430;\">Curse of Eternal Paperwork</span>", "<span style=\"color: #cc1430;\">Curse of Eternal Paperwork</span>", "1", ""], ["PaperworkCurse_TokenMistakeGerman", "<span style=\"color: #cc1430;\">Curse of Eternal Paperwork</span>", "<color=\"#cc1430\">Fluch des ewigen Papierkrams<color>", "1", ""], ["PaperworkCurse_TokenMissing", "<span style=\"color: #cc1430;\">Curse of Eternal Paperwork</span>", "<color=\"#cc1430\">Fluch des ewigen Papierkrams", "1", ""], ["ColorToken_ColorfulDuplicate_0", "This is a <span style=\"color: #1e8852;\">colorful</span> duplicate string.", "Dies ist ein <span style=\"color: #1e8852;\">farbenfroher</span> doppelter String.", "3", ""], ["ColorToken_ColorfulDuplicate_0_Incorrect", "This is a <span style=\"color: #1e8852;\">colorful</span> duplicate string.", "Dies ist ein <span style=\"color: #1e8852;\">farbenfroher</span> doppelter String.", "1", ""], ["Duplicate_0", "This is a duplicate string.", "Dies ist ein doppelter String.", "7", ""], ["Duplicate_2_AddedSpace", "This is a duplicate string.", "Dies ist ein  doppelter String.", "1", ""], ["SoupTokenHopefullyCorrect_0", "This soup contains {50,num}% water, {40,num}% vegetables and {10,num}% pure frustration and despair.", "Diese Suppe beinhaltet {50,num}% Wasser, {40,num}% Gem√ºse und {10,num}% pure Frustration and Verzweiflung.", "2", ""], ["TokenSoup_PercentMissing_0", "This soup contains {50,num}% water, {40,num}% vegetables and {10,num}% pure frustration and despair.", "Diese Suppe beinhaltet {60,num}% Wasser, {40,num}% Gem√ºse und {10,num} pure Frustration and Verzweiflung.", "2", ""], ["TokenSoup_NumMismatch", "This soup contains {50,num}% water, {40,num}% vegetables and {10,num}% pure frustration and despair.", "Diese Suppe beinhaltet {60,num}% Wasser, {40,num}% Gem√ºse und {10,num}% pure Frustration and Verzweiflung.", "1", ""], ["TokenSoup_SevereIssue", "This soup contains {50,num}% water, {40,num}% vegetables and {10,num}% pure frustration and despair.", "Diese Suppe beinhaltet nichts.", "1", ""], ["Stew_RandomSortingTestString", "\"Mmmmh, this stew tastes delicious! What are the ingredients?\"", "\"Mmmmh, dieser Eintopf schmeckt lecker! Was ist da alles drin?\"", "2", ""], ["Dup_Stew_RandomSortingTestString_MMissing", "\"Mmmmh, this stew tastes delicious! What are the ingredients?\"", "\"Mmmh, dieser Eintopf schmeckt lecker! Was ist da alles drin?\"", "1", ""], ["DayOfWeekFri_Inconsistent_0", "It's Friday today!", "Es ist Freitag!", "2", ""], ["DayOfWeekFri_Consistent", "It's Friday today!", "Heute ist Freitag!", "1", ""], ["CurseOfDups_0", "<span style=\"color: #cc1430;\">Curse of Duplicate Strings</span>", "<span style=\"color: #cc1430;\">Fluch der doppelten Strings</span>", "2", ""], ["CurseOfDupsSwappedToken", "<span style=\"color: #cc1430;\">Curse of Duplicate Strings</span>", "</color>Fluch der doppelten Strings<color=\"#cc1430\">", "1", ""], ["ColorToken_HopefullyCorrect", "Hopefully <span style=\"color: #1e8852;\">correct</span>.", "Hoffentlich <span style=\"color: #1e8852;\">richtig</span>.", "1", ""], ["ColorToken_HopefullyAlsoCorrect", "Hopefully also <span style=\"color: #1e8852;\">correct</span>.", "Hoffentlich auch <span style=\"color: #1e8852;\">richtig</span>.", "1", ""], ["DayOfWeekTue", "It's Tuesday today!", "Heute ist Dienstag!", "1", ""], ["DayOfWeekTue_MissingSpace", "It's Tuesday today!", "Heuteist Dienstag!", "1", ""], ["RandomSortingTestString_Cake", "\"Mmmmh, this cake tastes delicious! What are the ingredients?\"", "\"Mmmmh, dieser Kuchen schmeckt lecker! Was ist da alles drin?\"", "2", ""], ["RandomSortingTestStringCasserole", "\"Mmmmh, this casserole tastes delicious! What are the ingredients?\"", "\"Mmmmh, dieser Auflauf schmeckt lecker! Was ist da alles drin?\"", "1", ""], ["SortingTestStringRandom_Soup", "\"Mmmmh, this soup tastes delicious! What are the ingredients?\"", "\"Mmmmh, diese Suppe schmeckt lecker! Was ist da alles drin?\"", "1", ""], ["DayOfWeekMon", "It's Monday today!", "Heute ist Montag!", "1", ""], ["DayOfWeekSat", "It's Saturday today!", "Heute ist Samstag!", "1", ""], ["DayOfWeekSun_0", "It's Sunday today!", "Heute ist Sonnstag!", "2", ""], ["DayOfWeekThu", "It's Thursday today!", "Heute ist Donnerstag!", "1", ""], ["WedDayOfWeek", "It's Wednesday today!", "Heute ist Mittwoch!", "1", ""], ["ThankYouMessage_0", "Thank you Leo for sharing! :D", "Danke f√ºrs Teilen, Leo! :D", "2", ""]];
            let showingRaw = false;
            let tableData = formattedData;
            let dataTable;
        
            function getStateKey(index) {
                return "state_StringZ_Visualizer_-_German_Translation_Review_row_" + index;
            }
        
            function generateRowWithState(row, idx) {
                const savedState = localStorage.getItem(getStateKey(idx)) || "";
                const selectHTML = '<select class="state-select ' + savedState.toLowerCase() + '">' +
                    '<option value="" ' + (savedState === "" ? "selected" : "") + '></option>' +
                    '<option value="Pass" ' + (savedState === "Pass" ? "selected" : "") + '>Pass</option>' +
                    '<option value="Fail" ' + (savedState === "Fail" ? "selected" : "") + '>Fail</option>' +
                    '</select>';
                const newRow = row.slice();
                const stateIndex = headers.indexOf("State");
                newRow[stateIndex] = selectHTML;
                return newRow;
            }
        
            function renderData(data) {
                tableData = data;
                const transformed = data.map((row, idx) => generateRowWithState(row, idx));
        
                if (!dataTable) {
                    dataTable = $('#myTable').DataTable({
                        data: transformed,
                        columns: headers.map(h => ({ title: h })),
                        scrollX: true,
                        paging: true,
                        searching: true,
                        ordering: true,
                        deferRender: true,
                        lengthMenu: [[-1, 10, 25, 50], ["All", 10, 25, 50]],
                        columnDefs: [
                            {
                                targets: headers.indexOf("State"),
                                orderable: true
                            }
                        ]
                    });
        
                    $('#myTable tbody').on('change', 'select.state-select', function () {
                        const rowIdx = dataTable.row($(this).closest('tr')).index();
                        const value = $(this).val();
                        localStorage.setItem(getStateKey(rowIdx), value);
                        this.className = "state-select " + value.toLowerCase();
                    });
                } else {
                    const currentPage = dataTable.page();
                    const currentLength = dataTable.page.len();
                    dataTable.clear().rows.add(transformed).draw(false);
                    dataTable.page.len(currentLength).draw();
                    dataTable.page(currentPage).draw(false);
                }
            }
        
            function toggleData() {
                showingRaw = !showingRaw;
                renderData(showingRaw ? rawData : formattedData);
                
                // Update button text
                const btn = document.querySelector('.toggle-btn');
                btn.textContent = showingRaw ? 'Show Formatted' : 'Show Raw';
            }
        
            function clearAllStates() {
                const total = tableData.length;
                let clearedCount = 0;
                
                for (let i = 0; i < total; i++) {
                    const key = getStateKey(i);
                    if (localStorage.getItem(key)) {
                        localStorage.removeItem(key);
                        clearedCount++;
                    }
                }
                
                renderData(tableData);
                
                // Better user feedback
                if (clearedCount > 0) {
                    alert(`‚úÖ Cleared ${clearedCount} review states!`);
                } else {
                    alert('‚ÑπÔ∏è No review states to clear.');
                }
            }
        
            function getProgress() {
                const total = tableData.length;
                let reviewed = 0;
                let passed = 0;
                let failed = 0;
                
                for (let i = 0; i < total; i++) {
                    const state = localStorage.getItem(getStateKey(i));
                    if (state) {
                        reviewed++;
                        if (state === 'Pass') passed++;
                        if (state === 'Fail') failed++;
                    }
                }
                
                return { total, reviewed, passed, failed };
            }
            
            function updateProgressDisplay() {
                const progress = getProgress();
                const percentage = Math.round((progress.reviewed / progress.total) * 100);
                
                // Update the info banner with progress
                const banner = document.querySelector('.info-banner p');
                if (banner) {
                    const originalText = banner.textContent.split('‚Ä¢')[0] + '‚Ä¢';
                    banner.innerHTML = `${originalText} üìä <strong>${progress.reviewed}/${progress.total}</strong> reviewed (<strong>${percentage}%</strong>) ‚Ä¢ ‚úÖ <strong>${progress.passed}</strong> passed ‚Ä¢ ‚ùå <strong>${progress.failed}</strong> failed`;
                }
            }
        
            $(document).ready(function () {
                renderData(formattedData);
                $('#clearState').click(clearAllStates);
                
                // Update progress on page load
                updateProgressDisplay();
                
                // Update progress when states change
                $('#myTable tbody').on('change', 'select.state-select', function () {
                    setTimeout(updateProgressDisplay, 100);
                });
            });
    </script>
  </body>
</html>